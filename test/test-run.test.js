import parse from 'parse-duration';
import { normalizeTime } from '../scripts/util.js';
import moment from 'moment';
import 'moment-duration-format';


describe('Calculate Total Score', () => {
    it("计算新榜总成绩", () => {
        const scores = [
            ["山月为关", "53''79", "1'21''78", "1'49''83", "2'31''50", "2'12''66", "2'35''46", "1'17''81", "3'03''56", "4'50''22"],
            ["蚌", "53''17", "1'24''93", "1'38''44", "2'28''69", "2'17''03", "2'45''33", "1'17''19", "3'11''40", "4'45''76"],
            ["阿班", "54''14", "1'24''26", "1'43''17", "2'35''18", "2'24''40", "2'43''98", "1'18''06", "2'59''46", "4'47''57"],
            ["小何²", "53''48", "1'25''38", "1'48''50", "2'55''77", "2'19''23", "2'28''88", "1'17''58", "3'17''85", "4'57''71"],
            ["馒头", "54''52", "1'28''78", "1'53''64", "2'35''04", "2'12''11", "2'40''50", "1'18''19", "3'23''94", "5'03''94"],
            ["福娃芙卡", "55''92", "1'29''72", "1'56''82", "2'53''17", "2'15''26", "2'35''49", "1'22''82", "3'08''95", "5'01''97"],
            ["离九", "56''08", "1'34''19", "1'45''65", "3'14''00", "2'14''27", "2'37''05", "1'20''40", "3'19''95", "4'56''20"],
            ["极了无", "55''13", "1'26''68", "1'52''17", "2'41''20", "2'19''51", "2'44''75", "1'20''06", "4'00''08", "5'08''33"]
        ];


        for (const score of scores) {
            let totalScore = 0;
            let player = "";

            for (let i = 0; i < score.length; ++i) {
                if (0 == i) player = score[0];
                else totalScore += parse(normalizeTime(score[i]));
            }

            console.log(player + ": " + moment.duration(totalScore, 'milliseconds').format("mm:ss.SSS", { trim: false }));
        }
    });
})
